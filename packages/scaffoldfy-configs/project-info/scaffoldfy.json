{
  "$schema": "../node_modules/@pixpilot/scaffoldfy/schema/scaffoldfy.schema.json",
  "name": "project-info",
  "description": "Project information prompts for pnpm-turbo-monorepo-template",

  "variables": [
    {
      "id": "repoUrlVar",
      "value": {
        "type": "exec",
        "value": "git config --get remote.origin.url"
      },
      "required": false
    },
    {
      "id": "currentYear",
      "value": {
        "type": "exec",
        "value": "node -e \"process.stdout.write(String(new Date().getFullYear()))\""
      }
    },
    {
      "id": "repoOwnerVar",
      "value": {
        "type": "exec",
        "value": "git remote get-url origin | node -pe \"require('fs').readFileSync(0,'utf-8').split('/').slice(-2,-1)[0].split(':').pop()\""
      }
    },
    {
      "id": "orgNameVar",
      "transformers": ["capitalize"],
      "value": {
        "type": "exec-file",
        "file": "./detect-git-hub-org.js",
        "args": ["--repoUrl={{repoUrlVar}}", "--env=production"]
      }
    },
    {
      "id": "orgNameCapital",
      "transformers": ["capitalize"],
      "value": {
        "type": "interpolate",
        "value": "{{orgNameVar}}"
      }
    },
    {
      "id": "projNameCapitalCase",
      "transformers": ["capitalCase"],
      "value": {
        "type": "exec",
        "value": "node -p \"require('path').basename(process.cwd())\""
      }
    }
  ],
  "prompts": [
    {
      "id": "projectName",
      "type": "input",
      "required": true,
      "message": "What is your project name?",
      "default": {
        "type": "interpolate",
        "value": "{{projNameCapitalCase}}"
      }
    },
    {
      "id": "repoOwner",
      "type": "input",
      "message": "Repository owner (GitHub username or organization)",
      "default": {
        "type": "interpolate",
        "value": "{{repoOwnerVar}}"
      },
      "required": true
    },
    {
      "id": "orgName",
      "type": "input",
      "message": "Organization name for packages (used in package scopes)",
      "default": {
        "type": "interpolate",
        "value": "{{orgNameCapital}}"
      },
      "required": false
    },
    {
      "id": "author",
      "type": "input",
      "message": "Author name",
      "default": {
        "type": "exec",
        "value": "git config user.name | node -pe \"require('fs').readFileSync(0,'utf-8').trim().replace('ccpu','m.doaie')\""
      },
      "required": true
    },
    {
      "id": "authorEmail",
      "type": "input",
      "message": "Author email",
      "default": {
        "type": "exec",
        "value": "git config user.email"
      },
      "required": false
    },
    {
      "id": "repoUrl",
      "type": "input",
      "message": "Repository URL",
      "default": {
        "type": "interpolate",
        "value": "{{repoUrlVar}}"
      },
      "required": false
    },
    {
      "id": "repoName",
      "type": "input",
      "message": "Repository name",
      "default": {
        "type": "exec",
        "value": "git remote get-url origin | node -e \"const url=require('fs').readFileSync(0,'utf-8').trim(); console.log(url.match(/[:/]([^/]+)\\/([^/]+?)(?:\\.git)?$/)[2])\""
      },
      "required": true
    },
    {
      "id": "baseRepoUrl",
      "type": "input",
      "message": "Base repository URL",
      "default": {
        "type": "exec",
        "value": "git remote get-url origin | node -e \"const url=require('fs').readFileSync(0,'utf-8').trim(); const match=url.match(/^(?:https?:\\/\\/|git@)([^/:]+)[:/](.+?)(?:\\.git)?$/); console.log(match ? `https://${match[1]}/${match[2]}` : '')\""
      },
      "required": false
    }
  ]
}
